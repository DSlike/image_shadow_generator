class ImageShadowGenerator{_getPixelsColor(t){t.crossOrigin="Anonymous";const e=document.createElement("canvas"),s=t.clientWidth,i=t.clientHeight;e.width=s,e.height=i;const a=e.getContext("2d");a.drawImage(t,0,0,t.clientWidth,i);let o=90*s/100,n=90*i/100;return[[...a.getImageData(30,30,1,1).data],[...a.getImageData(o,30,1,1).data],[...a.getImageData(o,n,1,1).data],[...a.getImageData(30,n,1,1).data]]}_drawShadow(t){let e=this._getPixelsColor(t).map(t=>(t[3]=.5,t.slice(0,4))),s=t.clientWidth/10,i=t.clientWidth/5,a=t.clientWidth/10;const o=[s-this.config.offsetX,s+this.config.offsetX,s+this.config.offsetX,s-this.config.offsetX],n=[s-this.config.offsetY,s-this.config.offsetY,s+this.config.offsetY,s+this.config.offsetY];return[`-${o[0]}px -${n[0]}px ${i}px -${a}px rgba(${e[0]})`,`${o[1]}px -${n[1]}px ${i}px -${a}px rgba(${e[1]})`,`${o[2]}px ${n[2]}px ${i}px -${a}px rgba(${e[2]})`,`-${o[3]}px ${n[3]}px ${i}px -${a}px rgba(${e[3]})`]}_applyStyles(t,e){const s=this._drawShadow(t);let i=document.getElementById("_isg-style");i||((i=document.createElement("style")).setAttribute("id","_isg-style"),document.head.appendChild(i)),i.innerHTML=`\n      .${this.config.imgClass}._isg-${e} {\n        box-shadow: ${s.join(",")};\n        -webkit-box-shadow: ${s.join(",")};\n        -moz--box-shadow: ${s.join(",")};\n      }\n    `}constructor(t){this.config={offsetX:0,offsetY:0,imgClass:"_isg"},t&&(this.offsetX=0|t.offsetX,this.offsetY=0|t.offsetY,this.imgClass="_isg"|t.imgClass);let e=document.getElementsByClassName(this.config.imgClass);Object.keys(e).forEach(t=>{let s=e[t];s.className=s.className+" _isg-"+t,s.addEventListener("load",()=>{this._applyStyles(s,t)},!1)})}}

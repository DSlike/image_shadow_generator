class ImageShadowGenerator{_getPixelsColor(t){t.crossOrigin="Anonymous";const e=document.createElement("canvas"),a=t.clientWidth,s=t.clientHeight;e.width=a,e.height=s;const i=e.getContext("2d");i.drawImage(t,0,0,t.clientWidth,s);let o=95*a/100,n=95*s/100,g=5*a/100,h=5*a/100;return[[...i.getImageData(g,h,1,1).data],[...i.getImageData(o/2,h,1,1).data],[...i.getImageData(o,h,1,1).data],[...i.getImageData(o,n/2,1,1).data],[...i.getImageData(o,n,1,1).data],[...i.getImageData(o/2,n,1,1).data],[...i.getImageData(g,n,1,1).data],[...i.getImageData(g,n/2,1,1).data]]}_drawShadow(t,e){const a=this.config.debug;let s=this.config.offsetX,i=this.config.offsetY,o=this._getPixelsColor(t).map(t=>(t[3]=0==t[3]?0:.5,t.slice(0,4))),n=t.clientWidth/10,g=a?0:this.config.shadowBlur*t.clientWidth/100;e&&(g=a?0:this.config.hoverBlurSize*t.clientWidth/100);let h=a?0:t.clientWidth/10;a&&e&&(s=0,i=0);const c=[n-s,0+s,n+s,n+s,n+s,0+s,n-s,n-s],$=[n-i,n-i,n-i,0+i,n+i,n+i,n+i,0+i];return[`-${c[0]}px -${$[0]}px ${g}px -${h}px rgba(${o[0]})`,`${c[1]}px -${$[1]}px ${g}px -${h}px rgba(${o[1]})`,`${c[2]}px -${$[2]}px ${g}px -${h}px rgba(${o[2]})`,`${c[3]}px ${$[3]}px ${g}px -${h}px rgba(${o[3]})`,`${c[4]}px ${$[4]}px ${g}px -${h}px rgba(${o[4]})`,`${c[5]}px ${$[5]}px ${g}px -${h}px rgba(${o[5]})`,`-${c[6]}px ${$[6]}px ${g}px -${h}px rgba(${o[6]})`,`-${c[7]}px ${$[7]}px ${g}px -${h}px rgba(${o[7]})`]}_applyStyles(t,e){const a=this._drawShadow(t,!1);let s=document.getElementById("_isg-style"),i="";if(!0===this.config.hover){const a=this._drawShadow(t,!0);i=`\n        .${this.config.imgClass}._isg-${e}:hover {\n          box-shadow: ${a.join(",")};\n          -webkit-box-shadow: ${a.join(",")};\n          -moz--box-shadow: ${a.join(",")};\n        }\n      `}s||((s=document.createElement("style")).setAttribute("id","_isg-style"),document.head.appendChild(s)),s.innerHTML=`\n      .${this.config.imgClass}._isg-${e} {\n        box-shadow: ${a.join(",")};\n        -webkit-box-shadow: ${a.join(",")};\n        -moz--box-shadow: ${a.join(",")};\n        transition: .3s;\n      }\n      ${i}\n    `}_processConfigs(t){this.config={offsetX:0,offsetY:50,imgClass:"_isg",shadowBlur:40,hoverBlurSize:90,hover:!1,debug:!1},t&&Object.keys(t).forEach(e=>{this.config[e]=t[e]}),1==this.config.debug&&(this.config.hover=!0),this.config.offsetX=30*this.config.offsetX/100,this.config.offsetY=30*this.config.offsetY/100}constructor(t){this._processConfigs(t);let e=document.getElementsByClassName(this.config.imgClass);Object.keys(e).forEach(t=>{let a=e[t];a.className=a.className+" _isg-"+t,"IMG"==a.tagName?a.addEventListener("load",()=>{this._applyStyles(a,t)},!1):"VIDEO"==a.tagName&&(a.ontimeupdate=(()=>{this._applyStyles(a,t)}))})}}
